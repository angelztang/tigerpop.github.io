{"ast":null,"code":"// Shows seller's listings + create listing button\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{getListings,createListing,deleteListing}from'../services/listingService';import ListingForm from'../components/ListingForm';import ListingCard from'../components/ListingCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SellerDashboard=()=>{const navigate=useNavigate();const[listings,setListings]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showForm,setShowForm]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);const[activeFilter,setActiveFilter]=useState('all');useEffect(()=>{fetchListings();},[]);const fetchListings=async()=>{try{const data=await getListings();setListings(data);}catch(err){setError('Failed to load listings');console.error('Error fetching listings:',err);}finally{setLoading(false);}};const handleListingCreated=async formData=>{setIsSubmitting(true);setError(null);try{await createListing({...formData,price:parseFloat(formData.price)});setShowForm(false);fetchListings();}catch(err){setError('Failed to create listing');console.error('Error creating listing:',err);}finally{setIsSubmitting(false);}};const handleDeleteListing=async id=>{try{await deleteListing(id);setListings(listings.filter(listing=>listing.id!==id));}catch(err){setError('Failed to delete listing');console.error('Error deleting listing:',err);}};const filteredListings=listings.filter(listing=>{if(activeFilter==='all')return true;if(activeFilter==='selling')return listing.status==='available';if(activeFilter==='sold')return listing.status==='sold';return true;});if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen\",children:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"My Listings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition-colors\",children:\"Create New Listing\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 bg-red-100 text-red-700 rounded-md\",children:error}),showForm&&/*#__PURE__*/_jsx(ListingForm,{onSubmit:handleListingCreated,isSubmitting:isSubmitting,onClose:()=>setShowForm(false)}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-8\",\"aria-label\":\"Tabs\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveFilter('all'),className:`${activeFilter==='all'?'border-orange-500 text-orange-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:\"All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveFilter('selling'),className:`${activeFilter==='selling'?'border-orange-500 text-orange-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:\"Selling\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveFilter('sold'),className:`${activeFilter==='sold'?'border-orange-500 text-orange-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:\"Sold\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\",children:filteredListings.map(listing=>/*#__PURE__*/_jsx(ListingCard,{listing:listing,onDelete:()=>handleDeleteListing(listing.id)},listing.id))})]})});};export default SellerDashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","getListings","createListing","deleteListing","ListingForm","ListingCard","jsx","_jsx","jsxs","_jsxs","SellerDashboard","navigate","listings","setListings","loading","setLoading","error","setError","showForm","setShowForm","isSubmitting","setIsSubmitting","activeFilter","setActiveFilter","fetchListings","data","err","console","handleListingCreated","formData","price","parseFloat","handleDeleteListing","id","filter","listing","filteredListings","status","className","children","onClick","onSubmit","onClose","map","onDelete"],"sources":["/Users/angel/Documents/Princeton/COS 333/tigerpop.github.io/frontend/src/pages/SellerDashboard.tsx"],"sourcesContent":["// Shows seller's listings + create listing button\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getListings, createListing, deleteListing } from '../services/listingService';\nimport { Listing } from '../services/listingService';\nimport ListingForm from '../components/ListingForm';\nimport ListingCard from '../components/ListingCard';\n\ntype FilterTab = 'all' | 'selling' | 'sold';\n\nconst SellerDashboard: React.FC = () => {\n  const navigate = useNavigate();\n  const [listings, setListings] = useState<Listing[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showForm, setShowForm] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [activeFilter, setActiveFilter] = useState<FilterTab>('all');\n\n  useEffect(() => {\n    fetchListings();\n  }, []);\n\n  const fetchListings = async () => {\n    try {\n      const data = await getListings();\n      setListings(data);\n    } catch (err) {\n      setError('Failed to load listings');\n      console.error('Error fetching listings:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleListingCreated = async (formData: { title: string; description: string; price: string; category: string; images: string[] }) => {\n    setIsSubmitting(true);\n    setError(null);\n    try {\n      await createListing({\n        ...formData,\n        price: parseFloat(formData.price)\n      });\n      setShowForm(false);\n      fetchListings();\n    } catch (err) {\n      setError('Failed to create listing');\n      console.error('Error creating listing:', err);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleDeleteListing = async (id: number) => {\n    try {\n      await deleteListing(id);\n      setListings(listings.filter(listing => listing.id !== id));\n    } catch (err) {\n      setError('Failed to delete listing');\n      console.error('Error deleting listing:', err);\n    }\n  };\n\n  const filteredListings = listings.filter(listing => {\n    if (activeFilter === 'all') return true;\n    if (activeFilter === 'selling') return listing.status === 'available';\n    if (activeFilter === 'sold') return listing.status === 'sold';\n    return true;\n  });\n\n  if (loading) {\n    return <div className=\"flex justify-center items-center min-h-screen\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h1 className=\"text-3xl font-bold\">My Listings</h1>\n          <button\n            onClick={() => setShowForm(true)}\n            className=\"bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition-colors\"\n          >\n            Create New Listing\n          </button>\n        </div>\n\n        {error && (\n          <div className=\"mb-4 p-4 bg-red-100 text-red-700 rounded-md\">\n            {error}\n          </div>\n        )}\n\n        {showForm && (\n          <ListingForm\n            onSubmit={handleListingCreated}\n            isSubmitting={isSubmitting}\n            onClose={() => setShowForm(false)}\n          />\n        )}\n\n        <div className=\"mb-6 border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\n            <button\n              onClick={() => setActiveFilter('all')}\n              className={`${\n                activeFilter === 'all'\n                  ? 'border-orange-500 text-orange-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}\n            >\n              All\n            </button>\n            <button\n              onClick={() => setActiveFilter('selling')}\n              className={`${\n                activeFilter === 'selling'\n                  ? 'border-orange-500 text-orange-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}\n            >\n              Selling\n            </button>\n            <button\n              onClick={() => setActiveFilter('sold')}\n              className={`${\n                activeFilter === 'sold'\n                  ? 'border-orange-500 text-orange-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}\n            >\n              Sold\n            </button>\n          </nav>\n        </div>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredListings.map(listing => (\n            <ListingCard\n              key={listing.id}\n              listing={listing}\n              onDelete={() => handleDeleteListing(listing.id)}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SellerDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}