{"ast":null,"code":"import React,{useEffect,useState}from'react';import ListingCard from'../components/ListingCard';import{getListings}from'../services/listingService';import ListingDetailModal from'../components/ListingDetailModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MarketplacePage=()=>{const[listings,setListings]=useState([]);const[selectedPrice,setSelectedPrice]=useState(null);const[selectedCategory,setSelectedCategory]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedListing,setSelectedListing]=useState(null);const priceRanges=[{label:'Under $10',max:10},{label:'Under $15',max:15},{label:'Under $20',max:20},{label:'Under $50',max:50}];const categories=[{name:'Tops',image:'/category-placeholder.jpg',slug:'tops'},{name:'Bottoms',image:'/category-placeholder.jpg',slug:'bottoms'},{name:'Shoes',image:'/category-placeholder.jpg',slug:'shoes'},{name:'Dresses',image:'/category-placeholder.jpg',slug:'dresses'},{name:'Furniture',image:'/category-placeholder.jpg',slug:'furniture'},{name:'Other',image:'/category-placeholder.jpg',slug:'other'}];const fetchListings=async()=>{try{setLoading(true);setError(null);let url='';const params=new URLSearchParams();if(selectedPrice){params.append('max_price',selectedPrice.toString());}if(selectedCategory){params.append('category',selectedCategory);}if(params.toString()){url=`?${params.toString()}`;}const data=await getListings(url);setListings(data);}catch(error){console.error('Error fetching listings:',error);setError('Failed to load listings. Please try again later.');}finally{setLoading(false);}};useEffect(()=>{fetchListings();},[selectedPrice,selectedCategory]);const handleCategoryClick=slug=>{setSelectedCategory(selectedCategory===slug?null:slug);setSelectedPrice(null);// Reset price filter when changing category\n};const handlePriceClick=max=>{setSelectedPrice(selectedPrice===max?null:max);};const filteredListings=listings.filter(listing=>{if(selectedCategory&&listing.category.toLowerCase()!==selectedCategory)return false;if(selectedPrice&&listing.price>selectedPrice)return false;return true;});if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl\",children:\"Loading listings...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl text-red-600\",children:error})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Shop By Price\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:priceRanges.map(range=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePriceClick(range.max),className:`px-6 py-2 rounded-lg ${selectedPrice===range.max?'bg-orange-100 text-orange-700':'bg-gray-50 hover:bg-gray-100 text-gray-700'} transition-colors duration-200`,children:range.label},range.max))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Shop By Piece\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:categories.map(category=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleCategoryClick(category.slug),className:`relative overflow-hidden rounded-lg aspect-[4/3] group ${selectedCategory===category.slug?'ring-2 ring-orange-500':''}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-b from-transparent to-black opacity-60\"}),/*#__PURE__*/_jsx(\"img\",{src:category.image,alt:category.name,className:\"w-full h-full object-cover\"}),/*#__PURE__*/_jsx(\"span\",{className:\"absolute bottom-4 left-4 text-white text-xl font-medium\",children:category.name})]},category.slug))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-6\",children:\"All Items\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\",children:filteredListings.map(listing=>/*#__PURE__*/_jsx(ListingCard,{listing:listing,onDelete:()=>{}},listing.id))})]}),selectedListing&&/*#__PURE__*/_jsx(ListingDetailModal,{listing:selectedListing,onClose:()=>setSelectedListing(null),onPurchase:()=>{}})]});};export default MarketplacePage;","map":{"version":3,"names":["React","useEffect","useState","ListingCard","getListings","ListingDetailModal","jsx","_jsx","jsxs","_jsxs","MarketplacePage","listings","setListings","selectedPrice","setSelectedPrice","selectedCategory","setSelectedCategory","loading","setLoading","error","setError","selectedListing","setSelectedListing","priceRanges","label","max","categories","name","image","slug","fetchListings","url","params","URLSearchParams","append","toString","data","console","handleCategoryClick","handlePriceClick","filteredListings","filter","listing","category","toLowerCase","price","className","children","map","range","onClick","src","alt","onDelete","id","onClose","onPurchase"],"sources":["/Users/angel/Documents/Princeton/COS 333/tigerpop.github.io/frontend/src/pages/MarketplacePage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport ListingCard from '../components/ListingCard';\nimport { Listing, getListings } from '../services/listingService';\nimport ListingDetailModal from '../components/ListingDetailModal';\n\ninterface PriceRange {\n  label: string;\n  max: number;\n}\n\ninterface Category {\n  name: string;\n  image: string;\n  slug: string;\n}\n\nconst MarketplacePage: React.FC = () => {\n  const [listings, setListings] = useState<Listing[]>([]);\n  const [selectedPrice, setSelectedPrice] = useState<number | null>(null);\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedListing, setSelectedListing] = useState<Listing | null>(null);\n\n  const priceRanges: PriceRange[] = [\n    { label: 'Under $10', max: 10 },\n    { label: 'Under $15', max: 15 },\n    { label: 'Under $20', max: 20 },\n    { label: 'Under $50', max: 50 },\n  ];\n\n  const categories: Category[] = [\n    { name: 'Tops', image: '/category-placeholder.jpg', slug: 'tops' },\n    { name: 'Bottoms', image: '/category-placeholder.jpg', slug: 'bottoms' },\n    { name: 'Shoes', image: '/category-placeholder.jpg', slug: 'shoes' },\n    { name: 'Dresses', image: '/category-placeholder.jpg', slug: 'dresses' },\n    { name: 'Furniture', image: '/category-placeholder.jpg', slug: 'furniture' },\n    { name: 'Other', image: '/category-placeholder.jpg', slug: 'other' },\n  ];\n\n  const fetchListings = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      let url = '';\n      const params = new URLSearchParams();\n      \n      if (selectedPrice) {\n        params.append('max_price', selectedPrice.toString());\n      }\n      \n      if (selectedCategory) {\n        params.append('category', selectedCategory);\n      }\n      \n      if (params.toString()) {\n        url = `?${params.toString()}`;\n      }\n      \n      const data = await getListings(url);\n      setListings(data);\n    } catch (error) {\n      console.error('Error fetching listings:', error);\n      setError('Failed to load listings. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchListings();\n  }, [selectedPrice, selectedCategory]);\n\n  const handleCategoryClick = (slug: string) => {\n    setSelectedCategory(selectedCategory === slug ? null : slug);\n    setSelectedPrice(null); // Reset price filter when changing category\n  };\n\n  const handlePriceClick = (max: number) => {\n    setSelectedPrice(selectedPrice === max ? null : max);\n  };\n\n  const filteredListings = listings.filter(listing => {\n    if (selectedCategory && listing.category.toLowerCase() !== selectedCategory) return false;\n    if (selectedPrice && listing.price > selectedPrice) return false;\n    return true;\n  });\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"text-xl\">Loading listings...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"text-xl text-red-600\">{error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      {/* Price Filters */}\n      <div className=\"mb-8\">\n        <h2 className=\"text-xl font-bold mb-4\">Shop By Price</h2>\n        <div className=\"flex flex-wrap gap-3\">\n          {priceRanges.map((range) => (\n            <button\n              key={range.max}\n              onClick={() => handlePriceClick(range.max)}\n              className={`px-6 py-2 rounded-lg ${\n                selectedPrice === range.max\n                  ? 'bg-orange-100 text-orange-700'\n                  : 'bg-gray-50 hover:bg-gray-100 text-gray-700'\n              } transition-colors duration-200`}\n            >\n              {range.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Category Cards */}\n      <div className=\"mb-12\">\n        <h2 className=\"text-xl font-bold mb-4\">Shop By Piece</h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {categories.map((category) => (\n            <button\n              key={category.slug}\n              onClick={() => handleCategoryClick(category.slug)}\n              className={`relative overflow-hidden rounded-lg aspect-[4/3] group ${\n                selectedCategory === category.slug\n                  ? 'ring-2 ring-orange-500'\n                  : ''\n              }`}\n            >\n              <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-black opacity-60\"></div>\n              <img\n                src={category.image}\n                alt={category.name}\n                className=\"w-full h-full object-cover\"\n              />\n              <span className=\"absolute bottom-4 left-4 text-white text-xl font-medium\">\n                {category.name}\n              </span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* All Items Section */}\n      <div>\n        <h2 className=\"text-xl font-bold mb-6\">All Items</h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredListings.map((listing) => (\n            <ListingCard\n              key={listing.id}\n              listing={listing}\n              onDelete={() => {}}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* Listing Detail Modal */}\n      {selectedListing && (\n        <ListingDetailModal\n          listing={selectedListing}\n          onClose={() => setSelectedListing(null)}\n          onPurchase={() => {}}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default MarketplacePage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}